import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class SocketServer {

	public static final int PORT = 31288;

	/**
	 * @param args
	 * @throws IOException
	 */
	public static void main(String[] args) throws IOException {
		// TODO Auto-generated method stub
		ServerSocket serverSocket = new ServerSocket(PORT);
		System.out.println("开始：" + serverSocket);
		// 生成一人Socket等待连接请求
		Socket socket = serverSocket.accept();
		System.out.println("接受连接请求：" + socket);
		BufferedReader in = new BufferedReader(new InputStreamReader(socket
				.getInputStream()));
		// 定义一人PrintWriter对象写输出流
		PrintWriter out = new PrintWriter(new BufferedWriter(
				new OutputStreamWriter(socket.getOutputStream())), true);
		while(true){
			String string=in.readLine();
			if(string.equals("END")){
				break;
			}
			System.out.println("自客户端："+string);
			out.println(string);
		}
		//关闭socket
		System.out.println("关闭。。。");
		socket.close();
		
	}

}
