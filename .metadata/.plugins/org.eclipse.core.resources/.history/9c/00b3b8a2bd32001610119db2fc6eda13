package JavaLightWeightHttpProxy;

import java.io.IOException;
import java.net.ServerSocket;

/**
 * 
 * Copyright ? 2016 Authors. All rights reserved.
 *
 * FileName: .java
 * @author : Wu_Being <1040003585@qq.com>
 * Date/Time: 2016-6-15/下午01:03:23
 * Description: http://www.jb51.net/article/48908.htm
 * http://www.moonsos.com/Article/WebSecurity/68.html (Java编写代理服务器(Burp拦截Demo))
 * http://my.oschina.net/u/267384/blog/173243 Java中HttpURLConnection使用代理服务器
 * http://www.ibm.com/developerworks/cn/java/l-javaproxy/ 用Java开发代理服务器
 * http://www.codeforge.cn/article/97354一款Java实现的HTTP代理服务器，兼容HTTP/1.1,支持SSL链接。RabbIT可以通过过滤背景图片，降低图片的解析率来加速网络浏览的速度。...
 */
public class HttpProxy {
	
	int myTcpPort = 8080;
	private ServerSocket myServerSocket;
	private Thread myThread;

	public HttpProxy(int port) throws IOException {
		myTcpPort = port;
		myServerSocket = new ServerSocket(myTcpPort);
		myThread = new Thread(new Runnable() {
			public void run() {
				try {
					while (true)
						new HTTPSession(myServerSocket.accept());
				} catch (IOException ioe) {
				}
			}
		});
		myThread.setDaemon(true);
		myThread.start();
	}

	/**
	 * Stops the server.
	 */
	public void stop() {
		try {
			myServerSocket.close();
			myThread.join();
		} catch (IOException ioe) {
		} catch (InterruptedException e) {
		}
	}

}