package _07ÊµÑéÆß_×é²¥±à³Ì.MulticastProject2.test¨‹.MulticastProject.test;


/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author K01
 */
import java.net.DatagramPacket;  
import java.net.InetAddress;  
import java.net.MulticastSocket;  
import java.util.Date;  
  
/** 
 * ç»„æ’­çš„æœåŠ¡ç«¯ 
 * @author Bird 
 * 
 */  
public class MulticastSender {  
      
    public static void server() throws Exception{  
        InetAddress group = InetAddress.getByName("239.1.2.3");//ç»„æ’­åœ°å€  
        int port = 22363;  
        MulticastSocket mss = null;  
        try {  
            mss = new MulticastSocket(port);  
            mss.joinGroup(group);  
            System.out.println("å‘é?æ•°æ®åŒ…å¯åŠ¨ï¼ï¼ˆå¯åŠ¨æ—¶é—?+new Date()+")");  
              
            while(true){  
                String message = "Helloï¼Œä½ çš„ç”µè„‘å·²ä¸­æ¯’#####"+new Date();  
                byte[] buffer = message.getBytes();  
                DatagramPacket dp = new DatagramPacket(buffer, buffer.length,group,port);  
                mss.send(dp);  
                System.out.println("å‘é?æ•°æ®åŒ…ç»™ "+group+":"+port);  
                Thread.sleep(1);  
            }  
        } catch (Exception e) {  
            e.printStackTrace();  
        }finally{  
            try {  
                if(mss!=null){  
                    mss.leaveGroup(group);  
                    mss.close();  
                }  
            } catch (Exception e2) {  
                // TODO: handle exception  
            }  
        }  
    }  
      
    public static void main(String[] args) throws Exception {  
        server();  
    }  
}  
