package _05实验五基于UDP编程实验testTeacher;

import java.io.*;
import java.net.*;

public class UDPClientTest {
	public static void main(String args[]) {
		try {
			// ����
			DatagramSocket localSocket = new DatagramSocket(3456);
			String string = "222.17.106.99:5000:Wu_Being";
			byte[] databyte = new byte[100];
			databyte = string.getBytes();
			DatagramPacket localPacket = new DatagramPacket(databyte, string
					.length(), InetAddress.getByName("222.17.106.113"), 5000);
			localSocket.send(localPacket);
			System.out.println("�ͻ��˿�ʼ������ݣ�");

			// ���ջظ�
			System.out.println("��ʼ������ݣ�");
			while (true) {
				localSocket.receive(localPacket);
				String name = localPacket.getAddress().toString();
				int port=localPacket.getPort();
				System.out.println("/n��������" + name + "/n�˿ڣ�"
						+ port);
				String s = new String(localPacket.getData(), 0, localPacket
						.getLength());
				System.out.println("���ܵ��������: " + s);

				localPacket = new DatagramPacket(databyte, string.length(),
						InetAddress.getByName("222.17.106.113"), port);
				localSocket.send(localPacket);
			}

		} catch (SocketException e) {
			System.out.println("���ܴ���ݱ�Socket������ݱ�Socket�޷���ָ���˿�����!");
		} catch (IOException ioe) {
			System.out.println(ioe.toString());
		}
	}
}