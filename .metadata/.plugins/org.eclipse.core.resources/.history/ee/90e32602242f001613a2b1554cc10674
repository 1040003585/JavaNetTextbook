package _5_2DatagramSocket编程示例._5_2_3用UDP实现的聊天程序;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class UDPChat implements Runnable,ActionListener{

	JTextArea showArea;
	JLabel lbl1,lbl2,lbl3;
	JTextField msgTextField,sendPortTextField,receivePorttTextField,IPAddressTextField;
	JFrame mainFrame;
	JButton sendButton,startButton;
	JScrollPane JSPane;
	JPanel panel1,panel2;
	Container container;
	
	Thread thread=null;
	DatagramSocket sendSocket,receiveSocket;
	DatagramPacket sendPacket,receivePacket;
	
	private InetAddress sendIP;
	private int sendPort,receivePort;//存储发送端口和接收端口
	private byte inbuf[],outbuf[];
	
	public static final int BUFSIZE=1024;
	
	public UDPChat() {
		mainFrame=new JFrame("聊天――UDP协议");
		container=mainFrame.getContentPane();
		
		showArea=new JTextArea();
		showArea.setEditable(false);
		showArea.setLineWrap(true);
		
		lbl1=new JLabel("接收端口号：");
		lbl2=new JLabel("发送端口号：");
		lbl3=new JLabel("对方的地址：");
		
		sendPortTextField=new JTextField();
		sendPortTextField.setColumns(5);
		receivePorttTextField=new JTextField();
		receivePorttTextField.setColumns(5);
		IPAddressTextField=new JTextField();
		IPAddressTextField.setColumns(8);
		
		startButton=new JButton("开始");
		startButton.addActionListener(this);/**/
		
		panel1=new JPanel();
		panel1.setLayout(new FlowLayout());
		panel1.add(lbl1);
		panel1.add(receivePorttTextField);
		panel1.add(lbl2);
		panel1.add(sendPortTextField);
		panel1.add(lbl3);
		panel1.add(IPAddressTextField);
		
		JSPane=new JScrollPane(showArea);
		
		msgTextField=new JTextField();
		msgTextField.setColumns(40);
		msgTextField.setEditable(false);
		msgTextField.addActionListener(this);/**/
		
		sendButton=new JButton("发送");
		sendButton.setEnabled(false);
		sendButton.addActionListener(this);/**/
		
		panel2=new JPanel();
		panel2.setLayout(new FlowLayout());
		panel2.add(msgTextField);
		panel2.add(sendButton);
		
		container.add(panel1,BorderLayout.EAST);
		container.add(JSPane,BorderLayout.CENTER);
		container.add(panel2,BorderLayout.SOUTH);
		
		mainFrame.setSize(600, 400);
		mainFrame.setVisible(true);
		mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
	} 
	
	@Override
	public void run() {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		// TODO Auto-generated method stub
		
	}

	public static void main(String[] args) {
		new UDPChat();
	}
}
